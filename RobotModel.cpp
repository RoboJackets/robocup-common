#include "RobotModel.hpp"

const RobotModel RobotModelControl = []() {
    RobotModel model;
    model.WheelRadius = 0.02768;

    model.A <<
        0.8122,   0.0660,  -0.1223,   0.0452,
        0.0616,   0.8107,   0.0493,  -0.1207,
       -0.1220,   0.0452,   0.7903,   0.0807,
        0.0494,  -0.1210,   0.0767,   0.7892;

    model.B <<
        3.9296,  -1.3279,   2.5316,  -0.9867,
       -1.3311,   3.9296,  -0.9834,   2.5319,
        2.5319,  -0.9867,   4.3815,  -1.6391,
       -0.9834,   2.5316,  -1.6424,   4.3815;

    model.PinvB <<
        0.4454,   0.1327,  -0.2544,  -0.0716,
        0.1342,   0.4454,  -0.0729,  -0.2545,
       -0.2545,  -0.0716,   0.4108,   0.1377,
       -0.0729,  -0.2544,   0.1390,   0.4108;

    // R=10
        // 0.1551,    0.0254,   -0.0576,    0.0096,
        // 0.0249,    0.1549,    0.0101,   -0.0574,
       // -0.0576,    0.0096,    0.1456,    0.0306,
        // 0.0101,   -0.0575,    0.0301,    0.1454,

    // R=1
    // model.K <<
        // 0.2981,    0.0736,   -0.1656,   -0.0183,
        // 0.0726,    0.2978,   -0.0173,   -0.1653,
       // -0.1655,   -0.0183,    0.2737,    0.0813,
       // -0.0173,   -0.1654,    0.0803,    0.2735;

    // R = 3
    // model.K <<
        // 0.2310,    0.0468,   -0.1107,    0.0018,
        // 0.0460,    0.2308,    0.0025,   -0.1105,
       // -0.1107,    0.0018,    0.2138,    0.0540,
        // 0.0025,   -0.1105,    0.0533,    0.2137;

    // LQR with R = 5
    model.K <<
        0.1981,    0.0367,   -0.0863,    0.0069,
        0.0360,    0.1979,    0.0076,   -0.0860,
       -0.0862,    0.0069,    0.1844,    0.0432,
        0.0076,   -0.0861,    0.0426,    0.1842;

    // LQI
    // model.K <<
        // 0.662839, 0.000665, -0.001269, -0.000357, -0.707104, 0.001403, -0.000075, -0.001331, 
        // 0.000665, 0.662839, -0.000357, -0.001269, -0.001403, -0.707104, 0.001331, 0.000070, 
        // -0.001269, -0.000357, 0.662666, 0.000690, 0.000070, -0.001331, -0.707104, 0.001259, 
        // -0.000357, -0.001269, 0.000690, 0.662666, 0.001331, -0.000075, -0.001259, -0.707104;

    // R = 20
    // model.K <<
        // 0.1162,    0.0167,   -0.0357,    0.0088,
        // 0.0164,    0.1161,    0.0092,   -0.0356,
       // -0.0357,    0.0088,    0.1101,    0.0203,
        // 0.0092,   -0.0356,    0.0200,    0.1100;

    // R = 1000
        // 0.0082,    0.0005,   -0.0009,    0.0004,
        // 0.0005,    0.0082,    0.0004,   -0.0009,
       // -0.0009,    0.0004,    0.0081,    0.0006,
        // 0.0004,   -0.0009,    0.0006,    0.0081;

    model.WheelAngles = {
        DegreesToRadians(180 - 30),  // M1
        DegreesToRadians(180 + 39),  // M2
        DegreesToRadians(360 - 39),  // M3
        DegreesToRadians(0 + 30),    // M4
    };

    model.WheelDist = 0.0798576;

    model.recalculateBotToWheel();

    return model;
}();
